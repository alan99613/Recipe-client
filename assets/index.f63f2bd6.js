import{o as e,c as t,a,t as s,b as r,d as o,C as n,w as l,v as i,F as u,r as p,e as d,f as c,g as h,h as m,i as g,j as w}from"./vendor.aaa5b356.js";let v;const f={},b={class:"recipeItem"},k={style:{width:"400px"}},y=a("br",null,null,-1);const P={data:()=>({login:!1,favourite:!1}),methods:{handleFavourite(e){this.favourite?this.deleteFavourite(e):this.addFavourite(e)},addFavourite(e){n.put("https://alan-recipe-api.herokuapp.com/api/v1/favourite/"+e,{},{headers:{Authorization:localStorage.token}}).then((e=>{alert(e.data.message),this.favourite=!0})).catch((function(e){400===e.response.status&&alert(e.response.data.message)}))},deleteFavourite(e){n.delete("https://alan-recipe-api.herokuapp.com/api/v1/favourite/"+e,{headers:{Authorization:localStorage.token}}).then((e=>{alert(e.data.message),this.favourite=!1})).catch((function(e){400===e.response.status&&alert(e.response.data.message)}))}},created(){localStorage.token&&(this.login=!0),this.isFavourite?this.favourite=!0:this.favourite=this.recipe.isFavourite}},S=Object.assign(P,{expose:[],props:{recipe:JSON,isFavourite:Boolean},setup:function(n){return(l,i)=>(e(),t("table",b,[a("tr",null,[a("td",k,[a("a",{href:"/Recipe-client/detail/"+n.recipe._id},[a("h1",null,s(n.recipe.recipeName),1),n.recipe.image?(e(),t("img",{key:0,width:"400",src:n.recipe.image},null,8,["src"])):r("",!0)],8,["href"])]),a("td",null,[o(s(n.recipe.description),1),y,l.login?(e(),t("button",{key:0,onClick:i[1]||(i[1]=e=>l.handleFavourite(n.recipe._id))},s(l.favourite?"Delete from favourites":"Add to favourites"),1)):r("",!0)])])]))}}),N={data:()=>({searchName:""}),methods:{search(){""==!this.searchName&&(window.location.href="./search/"+this.searchName)}}},F={id:"searchRecipe"};N.render=function(s,r,o,n,u,p){return e(),t("div",F,[l(a("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>u.searchName=e),placeholder:"Search recipe"},null,512),[[i,u.searchName]]),a("button",{onClick:r[2]||(r[2]=(...e)=>p.search&&p.search(...e))},"Search")])};const x={data:()=>({recipes:"",favourites:""}),created(){let e;localStorage.token&&(e={headers:{Authorization:localStorage.token}}),n.get("https://alan-recipe-api.herokuapp.com/api/v1/recipe?num=5",e).then((e=>{this.recipes=e.data})).catch((function(e){401===e.response.status&&(alert(e.response.data.message),this.$router.push("/logout"))}))}},I=Object.assign(x,{expose:[],setup:function(s){return(s,r)=>(e(),t(u,null,[a(N),(e(!0),t(u,null,p(s.recipes,(s=>(e(),t("div",null,[a(S,{recipe:s,isFavourite:!1},null,8,["recipe"])])))),256))],64))}}),$={data:()=>({login:!1}),methods:{loginout(){this.login?this.$router.push("/logout"):this.$router.push("/login")}},created(){localStorage.token&&(this.login=!0)}},C={class:"navbar"},U={class:"barItem"},V=o("Home"),q={class:"barItem barRightItem"},R={class:"barItem barRightItem"},_=o("Register"),A={class:"barItem barRightItem"},z=o("User Info"),D={class:"barItem barRightItem"},L=o("Favourite");$.render=function(o,n,l,i,u,p){const m=d("router-link");return e(),t("div",C,[a("div",U,[a(m,{to:"/"},{default:c((()=>[V])),_:1})]),a("div",q,[a("a",{href:"",onClick:n[1]||(n[1]=h(((...e)=>p.loginout&&p.loginout(...e)),["prevent"]))},s(u.login?"Logout":"Login"),1)]),a("div",R,[u.login?r("",!0):(e(),t(m,{key:0,to:"/register"},{default:c((()=>[_])),_:1}))]),a("div",A,[u.login?(e(),t(m,{key:0,to:"/userinfo"},{default:c((()=>[z])),_:1})):r("",!0)]),a("div",D,[u.login?(e(),t(m,{key:0,to:"/favourite"},{default:c((()=>[L])),_:1})):r("",!0)])])};const O={data:()=>({name:"",username:"",password:"",rPassword:""}),methods:{register(){this.password!=this.rPassword?alert("The password does not match the repeated password"):n.post("https://alan-recipe-api.herokuapp.com/api/v1/register",{name:this.name,username:this.username,password:this.password}).then((e=>{alert(e.data.message),this.$router.push("/login")})).catch((function(e){422===e.response.status&&alert(e.response.data.message)}))}}},T=a("h2",null,"Register",-1),j=a("br",null,null,-1),E=a("br",null,null,-1),B=a("br",null,null,-1),H=a("br",null,null,-1),J=a("button",{type:"submit"},"Register",-1);O.render=function(s,r,o,n,u,p){return e(),t("form",{class:"submitForm",onSubmit:r[5]||(r[5]=h(((...e)=>p.register&&p.register(...e)),["prevent"]))},[T,l(a("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>u.name=e),placeholder:"Name",required:""},null,512),[[i,u.name]]),j,l(a("input",{type:"text","onUpdate:modelValue":r[2]||(r[2]=e=>u.username=e),placeholder:"Username",required:""},null,512),[[i,u.username]]),E,l(a("input",{type:"password","onUpdate:modelValue":r[3]||(r[3]=e=>u.password=e),placeholder:"Password",required:""},null,512),[[i,u.password]]),B,l(a("input",{type:"password","onUpdate:modelValue":r[4]||(r[4]=e=>u.rPassword=e),placeholder:"Repeat password",required:""},null,512),[[i,u.rPassword]]),H,J],32)};const W={data:()=>({username:"",password:""}),methods:{login(){n.post("https://alan-recipe-api.herokuapp.com/api/v1/login",{username:this.username,password:this.password}).then((e=>{localStorage.setItem("userID",e.data.id),localStorage.setItem("token","Bearer "+e.data.token),this.$router.go("/")})).catch((function(e){422===e.response.status&&alert(e.response.data.message)}))}},created(){localStorage.token&&this.$router.push("/")}},G=a("h2",null,"Login",-1),K=a("br",null,null,-1),M=a("br",null,null,-1),Q=a("button",{type:"submit"},"Login",-1);W.render=function(s,r,o,n,u,p){return e(),t("form",{class:"submitForm",onSubmit:r[3]||(r[3]=h(((...e)=>p.login&&p.login(...e)),["prevent"]))},[G,l(a("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>u.username=e),placeholder:"Username",required:""},null,512),[[i,u.username]]),K,l(a("input",{type:"password","onUpdate:modelValue":r[2]||(r[2]=e=>u.password=e),placeholder:"Password",required:""},null,512),[[i,u.password]]),M,Q],32)};const X={data:()=>({newName:"",oldPasswordForName:"",oldPassword:"",newPassword:"",rPassword:""}),methods:{changeName(){if(""==this.newName)alert("Please enter a new name");else{let e={headers:{Authorization:localStorage.token}};n.put("https://alan-recipe-api.herokuapp.com/api/v1/user/name",{password:this.oldPasswordForName,newName:this.newName},e).then((e=>{alert(e.data.message),this.$router.push("/")})).catch((function(e){422===e.response.status?alert(e.response.data.message):401===e.response.status&&(alert(e.response.data.message),this.$router.push("/logout"))}))}},changePassword(){if(this.newPassword!=this.rPassword)alert("The new password does not match the repeated password");else{let e={headers:{Authorization:localStorage.token}};n.put("https://alan-recipe-api.herokuapp.com/api/v1/user/password",{password:this.oldPassword,newPassword:this.newPassword},e).then((e=>{alert(e.data.message),this.$router.push("/")})).catch((function(e){422===e.response.status?alert(e.response.data.message):401===e.response.status&&(alert(e.response.data.message),this.$router.push("/logout"))}))}}},created(){localStorage.token||this.$router.push("/login")}},Y=a("h2",null,"Change name",-1),Z=a("br",null,null,-1),ee=a("br",null,null,-1),te=a("button",{type:"submit"},"Change",-1),ae=a("br",null,null,-1),se=a("h2",null,"Change password",-1),re=a("br",null,null,-1),oe=a("br",null,null,-1),ne=a("br",null,null,-1),le=a("button",{type:"submit"},"Change",-1);X.render=function(s,r,o,n,u,p){return e(),t("div",null,[a("form",{class:"submitForm",onSubmit:r[3]||(r[3]=h(((...e)=>p.changeName&&p.changeName(...e)),["prevent"]))},[Y,l(a("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>u.newName=e),placeholder:"Name",required:""},null,512),[[i,u.newName]]),Z,l(a("input",{type:"password","onUpdate:modelValue":r[2]||(r[2]=e=>u.oldPasswordForName=e),placeholder:"Password",required:""},null,512),[[i,u.oldPasswordForName]]),ee,te],32),ae,a("form",{class:"submitForm",onSubmit:r[7]||(r[7]=h(((...e)=>p.changePassword&&p.changePassword(...e)),["prevent"]))},[se,l(a("input",{type:"password","onUpdate:modelValue":r[4]||(r[4]=e=>u.oldPassword=e),placeholder:"Old password",required:""},null,512),[[i,u.oldPassword]]),re,l(a("input",{type:"password","onUpdate:modelValue":r[5]||(r[5]=e=>u.newPassword=e),placeholder:"New Password",required:""},null,512),[[i,u.newPassword]]),oe,l(a("input",{type:"password","onUpdate:modelValue":r[6]||(r[6]=e=>u.rPassword=e),placeholder:"Repeat password",required:""},null,512),[[i,u.rPassword]]),ne,le],32)])};const ie=a("h2",{style:{"text-align":"center"}},"Favourites",-1);const ue={data:()=>({recipes:""}),created(){let e={headers:{Authorization:localStorage.token}};n.get("https://alan-recipe-api.herokuapp.com/api/v1/favourite/",e).then((e=>{this.recipes=e.data})).catch((function(e){console.log(e)}))}},pe=Object.assign(ue,{expose:[],setup:function(s){return(s,r)=>(e(),t(u,null,[ie,(e(!0),t(u,null,p(s.recipes,(s=>(e(),t("div",null,[a(S,{recipe:s,isFavourite:!0},null,8,["recipe"])])))),256))],64))}}),de={style:{"text-align":"center"}};const ce={data(){return{recipes:"",name:this.$route.params.name}},created(){let e;localStorage.token&&(e={headers:{Authorization:localStorage.token}}),n.get("https://alan-recipe-api.herokuapp.com/api/v1/recipe/name/"+this.name,e).then((e=>{this.recipes=e.data})).catch((function(e){401===e.response.status&&(alert(e.response.data.message),this.$router.push("/logout"))}))}},he=Object.assign(ce,{expose:[],setup:function(r){return(r,o)=>(e(),t(u,null,[a("h2",de,"Search: "+s(r.name),1),(e(!0),t(u,null,p(r.recipes,(s=>(e(),t("div",null,[a(S,{recipe:s,isFavourite:!1},null,8,["recipe"])])))),256))],64))}}),me={data:()=>({recipe:"",comments:"",commentText:""}),methods:{addComment(){if(""!=this.commentText){let e={headers:{Authorization:localStorage.token}};n.put("https://alan-recipe-api.herokuapp.com/api/v1/comment/"+this.$route.params.id,{comment:this.commentText},e).then((e=>{alert(e.data.message),this.$router.go(0)})).catch((function(e){422===e.response.status&&alert(e.response.data.message)}))}},deleteComment(e){n.delete("https://alan-recipe-api.herokuapp.com/api/v1/comment/"+this.$route.params.id,{headers:{Authorization:localStorage.token},data:{commentID:e}}).then((e=>{alert(e.data.message),this.$router.go(0)})).catch((function(e){422===e.response.status&&alert(e.response.data.message)}))}},created(){n.get("https://alan-recipe-api.herokuapp.com/api/v1/recipe/id/"+this.$route.params.id).then((e=>{this.recipe=e.data})).catch((function(e){400===e.response.status&&alert(e.response.data.message)})),n.get("https://alan-recipe-api.herokuapp.com/api/v1/comment/"+this.$route.params.id).then((e=>{this.comments=e.data})).catch((function(e){400===e.response.status&&alert(e.response.data.message)}))},computed:{token:()=>localStorage.getItem("token"),userID:()=>localStorage.getItem("userID")}},ge={key:0},we=o(" Ingredients: "),ve=o(" Step: "),fe=a("hr",null,null,-1),be={key:1},ke=o(" Comments: "),ye=a("br",null,null,-1),Pe=a("button",null,"Submit",-1),Se=a("br",null,null,-1),Ne={style:{border:"1px solid black",width:"100%","margin-top":"10px"}};me.render=function(n,d,c,m,g,w){return e(),t(u,null,[g.recipe?(e(),t("div",ge,[a("h1",null,s(g.recipe.recipeName),1),g.recipe.image?(e(),t("img",{key:0,src:g.recipe.image},null,8,["src"])):r("",!0),a("p",null,s(g.recipe.description),1),a("p",null,[we,a("ul",null,[(e(!0),t(u,null,p(g.recipe.ingredients,(a=>(e(),t("li",null,s(a),1)))),256))])]),a("p",null,[ve,a("ol",null,[(e(!0),t(u,null,p(g.recipe.steps,(a=>(e(),t("li",null,s(a),1)))),256))])])])):r("",!0),fe,g.recipe?(e(),t("div",be,[ke,w.token?(e(),t("form",{key:0,onSubmit:d[2]||(d[2]=h(((...e)=>w.addComment&&w.addComment(...e)),["prevent"]))},[l(a("textarea",{"onUpdate:modelValue":d[1]||(d[1]=e=>g.commentText=e),required:""},null,512),[[i,g.commentText]]),ye,Pe],32)):r("",!0),Se,(e(!0),t(u,null,p(g.comments,(n=>(e(),t("table",Ne,[a("tr",null,[a("td",null,[o(s(n.user.name)+":",1),w.userID===n.user._id?(e(),t("button",{key:0,style:{"margin-left":"5px"},onClick:e=>w.deleteComment(n._id)},"Delete",8,["onClick"])):r("",!0)])]),a("tr",null,[a("td",null,s(n.text),1)])])))),256))])):r("",!0)],64)};const Fe=[{path:"/",components:{default:I,nav:$}},{path:"/register",components:{default:O,nav:$}},{path:"/login",components:{default:W,nav:$}},{path:"/logout",component:()=>function(e,t){if(!t)return e();if(void 0===v){const e=document.createElement("link").relList;v=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in f)return;f[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":v,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>import("./logout.231843b4.js")),void 0)},{path:"/userinfo",components:{default:X,nav:$}},{path:"/favourite",components:{default:pe,nav:$}},{path:"/search/:name",components:{default:he,nav:$}},{path:"/detail/:id",components:{default:me,nav:$}}],xe=m({history:g("/Recipe-client/"),routes:Fe}),Ie={};Ie.render=function(s,r){const o=d("router-view");return e(),t(u,null,[a(o,{name:"nav"}),a(o)],64)};w(Ie).use(xe).mount("#app");
